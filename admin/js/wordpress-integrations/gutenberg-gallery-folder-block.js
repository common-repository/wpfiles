!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.React}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),o=n.n(a);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST",t=arguments.length>1?arguments[1]:void 0;return"PUT"===e||"DELETE"===e?{Accept:"application/json","Content-Type":"application/json","X-WP-Nonce":t}:{Accept:"application/json","X-WP-Nonce":t}}function c(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok&&401===e.status){var r=n&&n.message||e.statusText;return Promise.reject(r)}if(!e.ok&&503===e.status){var a=n&&n.message||e.statusText;return Promise.reject(a)}return n}))}var i,u={get:function(e,t){var n={method:"GET",headers:l("GET",t)};return fetch(e,n).then(c)},put:function(e,t,n){var r={method:"PUT",headers:l("PUT",n),body:JSON.stringify(t)};return fetch(e,r).then(c)},post:function(e,t,n){var r=new FormData;Object.keys(t).forEach((function(e){void 0!==t[e]&&(Array.isArray(t[e])?t[e].forEach((function(t,n){r.append(e+"["+n+"]",JSON.stringify(t))})):r.append(e,t[e]))}));var a={method:"POST",headers:l("POST",n),body:r};return fetch(e,a).then(c)},_import:function(e,t){var n=new FormData;Object.keys(t).forEach((function(e){"column"===e?n.append(e,JSON.stringify(t[e])):n.append(e,t[e])}));var r={method:"POST",headers:l(),body:n};return fetch(e,r).then(c)},destroy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:"DELETE",headers:l("DELETE"),body:JSON.stringify(t||[])};return fetch(e,n).then(c)},download:function(e){var t={method:"GET",headers:l("GET")};return fetch(e,t)},loadHtml:function(e,t){return fetch(e,{method:"GET"}).then(c)}};function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=wp.i18n.__,p=wp.blocks.registerBlockType,f=window.appLocalizer,m=wp.editor,b=m.AlignmentToolbar,h=m.BlockControls,y=m.InspectorControls,g=wp.components,v=g.PanelBody,O=g.RangeControl,E=g.ToggleControl,j=g.SelectControl;p("wpfiles/block-wpfiles-gallery",{title:d("WPFiles Gallery","wpfiles"),icon:{src:function(e){return o.a.createElement("svg",s({viewBox:"0 0 72 72"},e),i||(i=o.a.createElement("path",{d:"M42.9 38.3V38c2.9-.6 4.3-2.2 4.3-4.8V21.6c0-5.4-2.7-8.2-8-8.2H23.3c-.2-.6-.7-1-1.4-1-.8 0-1.4.6-1.4 1.4s.6 1.4 1.4 1.4c.7 0 1.2-.4 1.4-1H29v22.1h-5.7c-.2-.6-.7-1-1.4-1-.8 0-1.4.6-1.4 1.4s.6 1.4 1.4 1.4c.7 0 1.2-.4 1.4-1H29v20.7h-5.6c-.2-.6-.7-1-1.4-1-.8 0-1.4.6-1.4 1.4 0 .8.6 1.4 1.4 1.4.7 0 1.2-.4 1.4-1H41c4.6 0 6.8-2.2 6.8-6.7v-8.4c.1-2.6-1.6-4.3-4.9-5.2zm-8-19.4h3.6c1.8 0 2.7 1.1 2.7 3.3v9.9c0 2.2-1.2 3.3-3.4 3.3H35V18.9zm6.9 32.2c0 1.3-.8 1.9-2.4 1.9h-4.5V40.8h3.3c2.4 0 3.6 1.1 3.6 3.2v7.1z"})))}},category:"common",attributes:{isLoading:{type:"boolean",default:!1},captions:{type:"object",default:{}},imagesRemoved:{type:"array",default:[]},images:{type:"array",default:[]},selectedFolder:{type:"array",default:[]},columns:{type:"integer",default:3},isCropped:{type:"boolean",default:!0},hasCaption:{type:"boolean",default:!1},linkTo:{type:"string",default:"none"},sortBy:{type:"string",default:wp.media.model.Query.defaultProps.orderby},sortType:{type:"string",default:wp.media.model.Query.defaultProps.order},html:{type:"string",default:"none"}},supports:{align:["wide","full"]},edit:function(e){var t=Object(a.useRef)(!0),n=e.attributes,l=n.descriptionAlignment,c=n.selectedFolder,i=n.columns,s=n.isCropped,p=n.hasCaption,m=n.linkTo,g=n.sortBy,T=n.sortType,C=n.html,P=e.className,S=e.setAttributes;Object(a.useEffect)((function(){c.length>0&&w()}),[c,i,s,p,m,T,g]);var w=function(){u.put("".concat(f.apiUrl,"/gutenberg-get-images"),{columns:i,isCropped:s,hasCaption:p,linkTo:m,sortType:T,sortBy:g,selectedFolder:c},f.nonce).then((function(e){t.current&&S({html:e.html})}),(function(e){}))};return Object(a.useEffect)((function(){return function(){t.current=!1}}),[]),[Object(r.createElement)(y,null,Object(r.createElement)(v,{title:d("Folders","wpfiles")},Object(r.createElement)("div",{className:"components-base-control"},Object(r.createElement)("div",{className:"components-base-control__field"},f.data&&f.data.tree&&f.data.tree.length>0&&Object(r.createElement)("select",{onChange:function(e){!function(e){S({selectedFolder:[e]})}(e.target.value)}},Object(r.createElement)((function e(t){return Object(r.createElement)(o.a.Fragment,null,t.folders&&t.folders.map((function(n,a){return Object(r.createElement)(o.a.Fragment,null,2!==(null==n?void 0:n.id)&&Object(r.createElement)(o.a.Fragment,null,Object(r.createElement)("option",{selected:Number(t.selectedFolder)===Number(n.id),value:n.id},t.staric&&t.staric,n.text),n.children&&n.children.length>0&&Object(r.createElement)(e,{selectedFolder:t.selectedFolder,folders:n.children,staric:t.staric?t.staric+"*":"*"})))})))}),{selectedFolder:c,folders:f.data&&f.data.tree})),Object(r.createElement)("br",null),Object(r.createElement)("br",null),Object(r.createElement)("br",null),Object(r.createElement)(O,{label:"Columns",value:i,onChange:function(e){return S({columns:e})},min:1,max:4}),Object(r.createElement)("br",null),Object(r.createElement)(E,{label:"Crop Images",help:"Thumbnails are cropped to align.",checked:s,onChange:function(){S({isCropped:!s})}}),Object(r.createElement)(E,{label:"Caption",help:"Display image caption.",checked:p,onChange:function(){S({hasCaption:!p})}}),Object(r.createElement)(j,{label:"Link To",value:m,options:[{label:"None",value:"none"},{label:"Attachment Page",value:"attachment"},{label:"Media File",value:"media"},{label:"Lightbox",value:"lightbox"}],onChange:function(e){return S({linkTo:e})}}),Object(r.createElement)(j,{label:"Sort By",value:g,options:[{label:"By Name",value:"name"},{label:"By Date",value:"date"},{label:"By Modified",value:"modified"},{label:"By Author",value:"author"},{label:"By Title",value:"title"},{label:"By File Name",value:"file_name"}],onChange:function(e){return S({sortBy:e})}}),Object(r.createElement)(j,{label:"Sort Type",value:T,options:[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],onChange:function(e){return S({sortType:e})}}))))),Object(r.createElement)("div",{className:"".concat(P)},Object(r.createElement)(h,null,Object(r.createElement)(b,{value:l,onChange:function(e){S({descriptionAlignment:e})}})),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:C||"No post"}}))]},save:function(e){var t=e.attributes.html;return Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t||"No post"}})}})}]);