<?php
/**
 * In this class, you will find all Wordpress admin menus related to WPFiles.
 */
class Wp_Files_Menus
{
    private $slug;

    private $template;

    /**
     * Set WPFiles admin menus
     * @since 1.0.0
     * @param  mixed $slug
     * @param  mixed $title
     * @param  mixed $parent
     * @param  mixed $template
     * @return void
     */
    public function __construct($slug, $title, $parent = false, $template = "wpfiles-settings")
    {
        $this->slug = $slug;

        $this->template = $template;

        if (!$parent) {
            $this->page_id = add_menu_page(
                $title,
                $title,
                'manage_options',
                $this->slug,
                null,
                $this->get_menu_icon(),
                59
            );
        } else {
            $this->page_id = add_submenu_page(
                $parent,
                $title,
                $title,
                'manage_options',
                $this->slug,
                array($this, 'render')
            );
        }
    }

    /**
     * Render load template
     * @since 1.0.0
     * @return void
     */
    public function render()
    {
        $this->loadTemplate($this->template);
    }

    /**
     * Load template
     * @since 1.0.0
     * @param  mixed $template
     * @param  mixed $lib_params
     * @return void
     */
    public function loadTemplate($template, $lib_params = array())
    {
        ob_start();
        include_once WP_FILES_PLUGIN_DIR . 'admin/partials/' . $template . ".php";
        $template = ob_get_contents();
        ob_end_clean();
        echo $template;
    }

    /**
     * Return menu icon
     * @since 1.0.0
     * @return HTML
     */
    private function get_menu_icon()
    {
        ob_start();
        ?>
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M5.34949 12.9669C6.13406 13.491 7.05645 13.7708 8 13.7707C9.26482 13.7691 10.4774 13.266 11.3717 12.3715C12.266 11.4771 12.769 10.2645 12.7704 8.99967C12.7703 8.05612 12.4904 7.13377 11.9662 6.34927C11.4419 5.56477 10.6968 4.95335 9.82504 4.59233C8.95329 4.2313 7.99405 4.13689 7.06864 4.32103C6.14323 4.50518 5.2932 4.9596 4.62605 5.62684C3.95891 6.29408 3.5046 7.14417 3.32058 8.0696C3.13657 8.99504 3.23111 9.95426 3.59225 10.826C3.95339 11.6977 4.56492 12.4427 5.34949 12.9669ZM10.8955 8.78341C10.8898 8.36387 10.7674 7.95421 10.5419 7.60036C10.3114 7.31033 10.1657 6.96217 10.1208 6.59443C10.1158 6.39809 10.1888 6.20777 10.3238 6.06509C10.4587 5.92242 10.6447 5.83901 10.841 5.83313C10.8544 5.83313 10.8674 5.83426 10.8803 5.83539L10.8965 5.83671C10.4385 5.41727 9.89496 5.10229 9.30333 4.91356C8.7117 4.72482 8.08615 4.66684 7.46991 4.74361C6.85367 4.82038 6.26146 5.03007 5.73422 5.35819C5.20699 5.68631 4.75731 6.12503 4.41627 6.64401C4.51706 6.64694 4.61198 6.64923 4.69222 6.64923C5.14072 6.64923 5.83385 6.59475 5.83385 6.59475C5.88069 6.59112 5.92706 6.60624 5.96275 6.6368C5.99845 6.66735 6.02054 6.71084 6.02417 6.75768C6.02781 6.80452 6.01268 6.85089 5.98213 6.88659C5.95157 6.92228 5.90809 6.94437 5.86125 6.94801C5.8586 6.94832 5.62752 6.97548 5.37035 6.98878L6.93242 11.6349L7.87116 8.81962L7.20445 6.98878C6.97352 6.97508 6.75465 6.94801 6.75465 6.94801C6.70781 6.94442 6.66431 6.92236 6.63372 6.8867C6.60314 6.85104 6.58797 6.80469 6.59156 6.75784C6.59515 6.711 6.6172 6.6675 6.65286 6.63691C6.68853 6.60633 6.73488 6.59116 6.78172 6.59475C6.78172 6.59475 7.49018 6.64923 7.91161 6.64923C8.3601 6.64923 9.05323 6.59475 9.05323 6.59475C9.10008 6.59112 9.14645 6.60624 9.18214 6.6368C9.21783 6.66735 9.23993 6.71084 9.24356 6.75768C9.24719 6.80452 9.23207 6.85089 9.20152 6.88659C9.17096 6.92228 9.12748 6.94437 9.08063 6.94801C9.08063 6.94801 8.84774 6.9754 8.58973 6.98878L10.1401 11.5996L10.568 10.17C10.7405 9.72509 10.8507 9.25849 10.8955 8.78341ZM3.71075 9C3.71062 9.8055 3.93727 10.5948 4.36477 11.2775C4.79228 11.9602 5.40335 12.5087 6.12806 12.8603L4.08194 7.25429C3.83671 7.80358 3.71022 8.39845 3.71075 9ZM6.78825 13.1144L8.07502 9.37478L9.39344 12.9869C9.4019 13.0074 9.41216 13.0272 9.4241 13.0459C8.57444 13.3448 7.65228 13.3688 6.78825 13.1144ZM11.7635 6.94181C11.7833 7.08819 11.7932 7.23574 11.7931 7.38346C11.7858 7.91195 11.675 8.43389 11.467 8.91976L10.156 12.707C11.1223 12.1449 11.831 11.2278 12.1312 10.151C12.4315 9.07424 12.2995 7.92278 11.7635 6.94181Z" fill="#83878b"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 3.27778V14.5C16 15.3284 15.3284 16 14.5 16H1.5C0.671573 16 0 15.3284 0 14.5V1.5C0 0.671573 0.671573 0 1.5 0H5.6009C5.99873 0 6.38026 0.158035 6.66156 0.43934L7.56066 1.33844C7.84197 1.61974 8.2235 1.77778 8.62132 1.77778H14.5C15.3284 1.77778 16 2.44935 16 3.27778ZM5.22212 4.84267C6.04437 4.29325 7.01108 4 8 4C9.32558 4.00147 10.5964 4.52868 11.5338 5.46597C12.4712 6.40326 12.9984 7.6741 13 8.99967C13.0001 9.98859 12.7069 10.9553 12.1575 11.7776C11.6081 12.5999 10.8273 13.2408 9.91364 13.6193C9.00002 13.9978 7.99468 14.0969 7.02475 13.904C6.05482 13.7111 5.16388 13.2349 4.46458 12.5356C3.76529 11.8364 3.28905 10.9455 3.0961 9.97557C2.90315 9.00566 3.00214 8.00031 3.38057 7.08666C3.759 6.17301 4.39986 5.3921 5.22212 4.84267Z" fill="#83878b"/>
        </svg>
        <?php
        $svg = ob_get_clean();
        return 'data:image/svg+xml;base64,' . base64_encode($svg);
    }
}
